# Общая информация

В данном репозитории содержится реализация игры Мафия.

При подключении к серверу, игроку необходимо указать свой ник (уникальный для каждого игрока), а также информацию для заполнения профиля. После этого игрок попадает в главное меню, где может выбрать одну из нескольких опций:
- Подключиться к игре
- Изменить свой профиль
- Получить данные о профилях игроков
- Получить статистику игрока
- Получить информацию о прошедших играх
- Получить результаты игры
- Добавить комментарий к игре
- Выйти из игры.

## Игра

Сначала игроку необходимо выбрать режим игры - автоматический или ручной. После этого игрок попадает в лобби, в котором логируется список подключенных игроков. Игра начинается, если набралось 4 игрока. В случае использования автоматического режима все действия будут логироваться.

В дневное время для всех живых игроков и в ночное время для мафии открывается чат, в котором можно обмениваться сообщениями. Для выхода из чата необходимо ввести пустое сообщение.

## Изменение профиля

Игрок может изменить свой профиль. Для этого необходимо указать, какое поле он хочет изменить и значение, которое он хочет установить.

## Получение данных о профилях игроков

Игрок может получить данные профилей нескольких игроков, указав их ники через запятую.

## Дополнтельные замечания

- При создании профиля необходимо передавать ссылку на изображение, чтобы в отчете статистики прогрузилась картинка

- Все данные хранятся в памяти, так что при перезапуске серверов статистика теряется

- По умолчанию считается, что пользователи используют данный клиент для игры, а также что все делают логичные действия

# Запуск и тестирование

## Запуск серверов

```
docker compose up --build grpc_server rest_server graphql_server rabbitmq
```

Необходимо запустить в отдельном терминале.

## Запуск клиента

```
docker compose run --build --rm client
```

Необходимо запустить по одному клиенту на терминал.

# Список того, что хотелось бы допилить в будущем

- CTRL + D для конца чата

- Enter для возвращения в меню

- Кастомные порты для всех серверов

- Создание единой точки запуска серверов

- Уход от aio_pika в пользу pika (возможно)

- Обработка ошибки в getScoreboard, addGame и addComment

- Конструктор игры от пользователей, а не от словаря

- Логи для grpc сервера
